@page "/"
@using BuffTracker.ViewModels

@inject AppState AppState;
@inject BuffTrackerViewModel BuffTrackerViewModel
@implements IDisposable

<PageTitle>Buffs & Conditions</PageTitle>

<CascadingValue Value="@BuffTrackerViewModel" Name="BuffTrackerViewModel">
    <Timeline />
    <StatusTracker />
</CascadingValue>


@code{
    protected override async void OnInitialized()
    {
        AppState.LoadState();
        Console.WriteLine("App state loaded");
        StateHasChanged();
    }

    public void Dispose()
    {
        AppState.SaveState();
    }

}